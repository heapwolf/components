
    <!DOCTYPE html>

      <head>
  <title>Tonic - Component Based Architecture</title>
  <link rel="preload" href="fonts/Avenir-Light.ttf" as="font" type="font/ttf" crossorigin="anonymous">
  <link rel="preload" href="fonts/SourceCodePro-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">
  <link href="index.css" rel="stylesheet">
  <link href="theme.css" rel="stylesheet">

  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="120x120">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="128x128">
  <link rel="apple-touch-icon" type="image/png" href="favicon-152x152.png" sizes="152x152">
  <link rel="apple-touch-icon" type="image/png" href="favicon-167x167.png" sizes="167x167">
  <link rel="apple-touch-icon" type="image/png" href="favicon-180x180.png" sizes="180x180">

  <meta http-equiv="Content-Type" charset="utf-8" content="text/html">
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

  <meta name="description" content="Component Based Architecture">

  <meta property="og:site_name", content="Operator Tool Co.">
  <meta property="og:title", content="Tonic Components">
  <meta property="og:description" content="Component Based Architecture">
  <meta property="og:type", content="website">
  <meta property="og:url", content="https://optoolco.github.io/components">
  <meta property="og:image", content="https://optoolco.github.io/components/tonic_preview.png">
  <meta name="twitter:card", content="summary">
  <meta name="twitter:site", content="@optoolco">
  <meta name="twitter:image", content="https://optoolco.github.io/components/tonic_preview.png">

  <!-- TODO: An issue with chartjs requires 'unsafe-inline' for now. -->

  <meta
    http-equiv="Content-Security-Policy"
    content="
      default-src 'self';
      font-src 'self' https:;
      img-src 'self' http: https: data:;
      style-src 'self' 'unsafe-inline' https:;
      script-src 'self' 'nonce-U29tZSBzdXBlciBzZWNyZXQ=';
      connect-src 'self' https:;
    "
  >
</head>


      <body data-page="docs">
        <nav>
          <div class="page-selection">
            <a name="docs" href="./index.html">Docs</a>
            <a name="examples" href="./examples.html">Examples</a>
          </div>

          <ul>
            
    <li>
      <a href="#intro" class="selected">Intro</a>
    </li>
  

    <li>
      <a href="#getting-started" class="">Getting Started</a>
    </li>
  

    <li>
      <a href="#properties" class="">Properties</a>
    </li>
  

    <li>
      <a href="#state" class="">State</a>
    </li>
  

    <li>
      <a href="#composition" class="">Composition</a>
    </li>
  

    <li>
      <a href="#events" class="">Events</a>
    </li>
  

    <li>
      <a href="#methods" class="">Methods</a>
    </li>
  

    <li>
      <a href="#styling" class="">Styling</a>
    </li>
  

    <li>
      <a href="#csp" class="">CSP</a>
    </li>
  

    <li>
      <a href="#api" class="">API</a>
    </li>
  
          </ul>

        </nav>
        <main>

          <div class="mobile-nav">
            <a name="docs" href="./index.html">Docs</a>
            <a name="examples" href="./examples.html">Examples</a>
          </div>

          <tonic-sprite></tonic-sprite>

          
    <section id="intro">
      
      <h1 id="intro">Intro</h1>
<div class="hero">
  <div class="tonic-icon">
    <a href="https://github.com/optoolco/tonic">
      <svg>
        <use xlink:href="./logo-sprite.svg#tonic_logo">
      </svg>
    </a>
  </div>
  <div class="row">
    <div class="col">
      <ul>
        <li>1 file. 1 class. ~350 lines of code</li>
        <li>No build tools required</li>
        <li>Based on native web components</li>
      </ul>
    </div>
    <div class="col">
      <ul>
        <li>Composition oriented</li>
        <li>Event delegation by default</li>
        <li>Boring</li>
      </ul>
    </div>
  </div>
</div>

    </section>
  

    <section id="getting-started">
      
      <h1 id="getting-started">Getting Started</h1>
<p>Building a component with Tonic starts by creating a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes">Javascript Class</a>.
The class should have at least one method named <em>render</em> which usually returns HTML.</p>
<pre><code class="language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyGreeting</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  <span class="hljs-comment">//</span>
  <span class="hljs-comment">// The render function can return a template-literal of HTML,</span>
  <span class="hljs-comment">// it can also include other components.</span>
  <span class="hljs-comment">//</span>
  render () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`&lt;div&gt;Hello, World.&lt;/div&gt;`</span>
  }
}</code></pre>
<hr>
<p>The html tag for your component will match its class name.</p>
<blockquote>
<p><i><b>Note</b>: Tonic is a thin wrapper around <code>web components</code>. Web
components require a name with two or more parts. So your class name should
be <code>CamelCased</code> (starting with an uppercase letter). For exmaple, <code>MyGreeting</code>
becomes <code>&lt;my-greeting&gt;&lt;/my-greeting&gt;</code>.</i></p>
</blockquote>
<hr>
<p>Next, register your component with <code>Tonic.add(ClassName)</code>.</p>
<pre><code class="language-js">Tonic.add(MyGreeting)</code></pre>
<hr>
<p>After adding your Javascript to your HTML, you can use your component anywhere.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;index.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">my-greeting</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">my-greeting</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre>
<blockquote>
<p><i><b>Note</b>: Custom tags (in all browsers) require a closing tag (even if
they have no children). Tonic doesn&#39;t add any &quot;magic&quot; to change how this works.</i></p>
</blockquote>
<hr>
<p>When the component is rendered by the browser, the result of your render
function will be inserted into the component tag.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;index.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">my-greeting</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello, World.<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">my-greeting</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre>
<p>The render function can also be <code>async</code> or even an <code>async generator</code>.</p>
<pre><code class="language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GithubUrls</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  <span class="hljs-keyword">async</span> * render () {
    <span class="hljs-keyword">yield</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`&lt;p&gt;Loading...&lt;/p&gt;`</span>

    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> fetch(<span class="hljs-string">&#x27;https://api.github.com/&#x27;</span>)
    <span class="hljs-keyword">const</span> urls = <span class="hljs-keyword">await</span> res.json()

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`
      &lt;pre&gt;
        <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(urls, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)}</span>
      &lt;/pre&gt;
    `</span>
  }
}</code></pre>

    </section>
  

    <section id="properties">
      
      <h1 id="properties">Properties</h1>
<p><code>Props</code> are properties that are passed to the component in the form of html
attributes. For example...</p>
<pre><code class="language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  render () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`
      &lt;my-greeting message=&quot;Hello, World&quot;&gt;
      &lt;/my-greeting&gt;
    `</span>
  }
}</code></pre>
<hr>
<p>Properties added to a component appear on the <code>this.props</code> object.</p>
<hr>
<p>Tonic has no templating language, it uses HTML! But since HTML only
understands string values, we need some help to pass more complex
values to a component, for that we use <code>this.html</code>.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> foo = {
  <span class="hljs-attr">hi</span>: <span class="hljs-string">&#x27;Hello, world&#x27;</span>,
  <span class="hljs-attr">bye</span>: <span class="hljs-string">&#x27;Goodbye, and thanks for all the fish&#x27;</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  render () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`
      &lt;my-greeting messages=&quot;<span class="hljs-subst">${foo}</span>&quot;&gt;
      &lt;/my-greeting&gt;
    `</span>
  }
}</code></pre>
<pre><code class="language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyGreeting</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  render () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`
      &lt;h1&gt;<span class="hljs-subst">${<span class="hljs-built_in">this</span>.props.messages.hi}</span>&lt;/h1&gt;
    `</span>
  }
}</code></pre>
<blockquote>
<p><i><b>Note</b>: A property named <code>fooBar=&#39;30&#39;</code> will become lowercased
(as per the HTML spec). If you want the property name to be camel cased when
added to the props object, use <code>foo-bar=&#39;30&#39;</code> to get <code>this.props.fooBar</code>.</i></p>
</blockquote>
<hr>
<p>You can use the &quot;spread&quot; operator to expand object literals into html properties.</p>
<pre><code class="language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  render () {
    <span class="hljs-keyword">const</span> o = {
      <span class="hljs-attr">a</span>: <span class="hljs-string">&#x27;testing&#x27;</span>,
      <span class="hljs-attr">b</span>: <span class="hljs-number">2.2</span>,
      <span class="hljs-attr">fooBar</span>: <span class="hljs-string">&#x27;ok&#x27;</span>
    }

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`
      &lt;some-component ...<span class="hljs-subst">${o}</span>&gt;
      &lt;/some-component&gt;

      &lt;div ...<span class="hljs-subst">${o}</span>&gt;
      &lt;/div&gt;
    `</span>
  }
}</code></pre>
<p>The above compoent renders the following output.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">my-component</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">some-component</span> <span class="hljs-attr">a</span>=<span class="hljs-string">&quot;testing&quot;</span> <span class="hljs-attr">b</span>=<span class="hljs-string">&quot;2.2&quot;</span> <span class="hljs-attr">foo-bar</span>=<span class="hljs-string">&quot;ok&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">a</span>=<span class="hljs-string">&quot;testing&quot;</span> <span class="hljs-attr">b</span>=<span class="hljs-string">&quot;2.2&quot;</span> <span class="hljs-attr">foo-bar</span>=<span class="hljs-string">&quot;ok&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">some-component</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">a</span>=<span class="hljs-string">&quot;testing&quot;</span> <span class="hljs-attr">b</span>=<span class="hljs-string">&quot;2.2&quot;</span> <span class="hljs-attr">foo-bar</span>=<span class="hljs-string">&quot;ok&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">my-component</span>&gt;</span></code></pre>
<h3>Updating properties</h3>
<p>There is no evidence that Virtual DOMs improve performance accross a broad set
of use cases, but it&#39;s certain that they greatly increase complexity. Tonic doesn&#39;t
use them. Instead, we recommend <code>incremental updates</code>. Simply put, you re-render a
component when you think the time is right. The rule of thumb is to only re-render
what is absolutely needed.</p>
<hr>
<p>To manually update a component you can use the <code>.reRender()</code> method. This method
receives either an object or a function. For example...</p>
<pre><code class="language-js"><span class="hljs-comment">// Update a component&#x27;s properties</span>
<span class="hljs-built_in">this</span>.reRender(<span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> ({
  ...props,
  <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;red&#x27;</span>
}))

<span class="hljs-comment">// Reset a component&#x27;s properties</span>
<span class="hljs-built_in">this</span>.reRender({ <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;red&#x27;</span> })

<span class="hljs-comment">// Re-render a component with its existing properties</span>
<span class="hljs-built_in">this</span>.reRender()</code></pre>
<hr>
<p>The <code>.reRender()</code> method can also be called directly on a component.</p>
<pre><code class="language-js"><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;parent&#x27;</span>).reRender({ <span class="hljs-attr">data</span>: [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>, ..<span class="hljs-number">.9999</span>] })</code></pre>

    </section>
  

    <section id="state">
      
      <h1 id="state">State</h1>
<p><code>this.state</code> is just a plain-old javascript object that will persist across
re-renders. A component that uses state requires an <code>id</code> property.</p>
<pre><code class="language-js"><span class="hljs-comment">//</span>
<span class="hljs-comment">// Update a component&#x27;s state</span>
<span class="hljs-comment">//</span>
<span class="hljs-built_in">this</span>.state = {
  ...this.state,
  <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;red&#x27;</span>
}))

<span class="hljs-comment">//</span>
<span class="hljs-comment">// Reset a component&#x27;s state</span>
<span class="hljs-comment">//</span>
<span class="hljs-built_in">this</span>.state = { <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;red&#x27;</span> }</code></pre>
<hr>
<p>Setting state will not cause a component to re-render. This way you can
make incremental updates. Components can be updated independently. And
rendering only happens only when necessary.</p>

    </section>
  

    <section id="composition">
      
      <h1 id="composition">Composition</h1>
<h3>Nesting</h3>
<p>With <code>Tonic</code> you can nest templates from other functions or methods.</p>
<pre><code class="language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyPage</span> </span>{
  renderHeader () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`&lt;h1&gt;Header&lt;/h1&gt;`</span>
  }
  render () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`
      <span class="hljs-subst">${<span class="hljs-built_in">this</span>.renderHeader()}</span>
      &lt;main&gt;My page&lt;/main&gt;
    `</span>
  }
}</code></pre>
<p>This means you can break up your <code>render() {}</code> method into multiple
methods or re-usable functions.</p>
<h3>Conditionals</h3>
<p>If you want to do conditional rendering you can use if statements.</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> LoginPage {
  render () {
    <span class="hljs-keyword">let</span> message = <span class="hljs-string">&#x27;Please Log in&#x27;</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.props.user) {
      message = <span class="hljs-built_in">this</span>.html<span class="hljs-string">`&lt;div&gt;Welcome <span class="hljs-subst">${<span class="hljs-built_in">this</span>.props.user.name}</span>&lt;/div&gt;`</span>
    }

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`&lt;div class=&quot;message&quot;&gt;<span class="hljs-subst">${message}</span>&lt;/div&gt;`</span>
  }
}</code></pre>
<h3>Children</h3>
<p>Once you add components, they can be nested any way you want. The
property <code>this.children</code> will get this component&#39;s child elements
so that you can read, mutate or wrap them.</p>
<pre><code class="language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParentComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  render () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`
      &lt;div class=&quot;parent&quot;&gt;
        &lt;another-component&gt;
          <span class="hljs-subst">${<span class="hljs-built_in">this</span>.children}</span>
        &lt;/another-component&gt;
      &lt;/div&gt;
    `</span>
  }
}

Tonic.add(ParentComponent)

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChildComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  render () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`
      &lt;div class=&quot;child&quot;&gt;
        <span class="hljs-subst">${<span class="hljs-built_in">this</span>.props.value}</span>
      &lt;/div&gt;
    `</span>
  }
}

Tonic.add(ChildComponent)</code></pre>
<h3>Input HTML</h3>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">parent-component</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;hello world&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child-component</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">parent-component</span>&gt;</span></code></pre>
<h3>Output HTML</h3>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">parent-component</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;parent&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">another-component</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;child&quot;</span>&gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">child-component</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">another-component</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">parent-component</span>&gt;</span></code></pre>
<h3>Repeating templates</h3>
<p>You can embed an array of template results using <code>this.html</code></p>
<pre><code class="language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TodoList</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  render () {
    <span class="hljs-keyword">const</span> todos = <span class="hljs-built_in">this</span>.state.todos

    <span class="hljs-keyword">const</span> lis = []
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> todo <span class="hljs-keyword">of</span> todos) {
      lis.push(<span class="hljs-built_in">this</span>.html<span class="hljs-string">`&lt;li&gt;<span class="hljs-subst">${todo.value}</span>&lt;/li&gt;`</span>)
    }

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`&lt;ul&gt;<span class="hljs-subst">${lis}</span>&lt;/ul&gt;`</span>
  }
}</code></pre>
<p>By using an array of template results, tonic will render your
repeating templates for you.</p>

    </section>
  

    <section id="events">
      
      <h1 id="events">Events</h1>
<p>There are two kinds of events. <code>Lifecycle Events</code> and <code>Interaction Events</code>.
Tonic uses the regular web component lifecycle events but improves on them,
see the API section for more details.</p>
<p>Tonic helps you capture interaction events without turning your html into
property spaghetti. It also helps you organize and optimize it.</p>
<pre><code class="language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Example</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  <span class="hljs-comment">//</span>
  <span class="hljs-comment">// You can listen to any DOM event that happens in your component</span>
  <span class="hljs-comment">// by creating a method with the corresponding name. The method will</span>
  <span class="hljs-comment">// receive the plain old Javascript event object.</span>
  <span class="hljs-comment">//</span>
  mouseover (e) {
    <span class="hljs-comment">// ...</span>
  }

  change (e) {
    <span class="hljs-comment">// ...</span>
  }

  willConnect () {
    <span class="hljs-comment">// The component will connect.</span>
  }

  connected () {
    <span class="hljs-comment">// The component has rendered.</span>
  }

  disconnected () {
    <span class="hljs-comment">// The component has disconnected.</span>
  }

  updated () {
    <span class="hljs-comment">// The component has re-rendered.</span>
  }

  click (e) {
    <span class="hljs-comment">//</span>
    <span class="hljs-comment">// You may want to check which element in the component was actually</span>
    <span class="hljs-comment">// clicked. You can also check the `e.path` attribute to see what was</span>
    <span class="hljs-comment">// clicked (helpful when handling clicks on top of SVGs).</span>
    <span class="hljs-comment">//</span>
    <span class="hljs-keyword">if</span> (!e.target.matches(<span class="hljs-string">&#x27;.parent&#x27;</span>)) <span class="hljs-keyword">return</span>

    <span class="hljs-comment">// ...</span>
  }

  render () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`&lt;div&gt;&lt;/div&gt;`</span>
  }
}</code></pre>
<p>The convention of most frameworks is to attach individual event listeners,
such as <code>onClick={myHandler()}</code> or <code>click=myHandler</code>. In the case where
you have a table with 2000 rows, this would create 2000 individual listeners.</p>
<p>Tonic prefers the <a href="https://davidwalsh.name/event-delegate">event delegation</a> pattern. With event delegation, we
attach a <strong>single event listener</strong> and watch for interactions on the child
elements of a component. With this approach, fewer listeners are created and we
do not need to rebind them when the DOM is re-created.</p>
<p>Each event handler method will receive the plain old Javascript <code>event</code> object.
This object contains a <code>target</code> property, the exact element that was clicked.
The <code>path</code> property is an array of elements containing the exact hierarchy.</p>
<p>Some helpful native DOM APIs for testing properties of an element:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/matches"><code>Element.matches(String)</code></a> tests if an element matches a selector</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/closest"><code>Element.closest(String)</code></a> finds the closest ancestor from the element
that matches the given selector</li>
</ul>
<p>Tonic also provides a helper function which checks if the element matches the
selector, and if not, tries to find the closest match.</p>
<pre><code class="language-js">Tonic.match(el, <span class="hljs-string">&#x27;selector&#x27;</span>)</code></pre>
<p>Here, when a particular element inside a child component is clicked, we
intercept the click event and pass along some data to the parent component.</p>
<h3>Example</h3>
<pre><code class="language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChildElement</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  click (e) {
    e.detail.bar = <span class="hljs-literal">true</span>
  }
  render () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`
      Click Me
    `</span>
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ParentElement</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  click (e) {
    <span class="hljs-keyword">if</span> (e.target.matches(<span class="hljs-string">&#x27;child-element&#x27;</span>)) {
      <span class="hljs-built_in">console</span>.log(e.detail.bar)
    }
  }
  render () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`
      &lt;child-element&gt;
      &lt;/child-element&gt;
    `</span>
  }
}</code></pre>
<p>The event object has a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/stopPropagation"><code>Event.stopPropagation()</code></a> method that is useful for
preventing an event from bubbling up to parent components. You may also be
interested in the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Event/preventDefault"><code>Event.preventDefault()</code></a> method.</p>

    </section>
  

    <section id="methods">
      
      <h1 id="methods">Methods</h1>
<p>A method is a function of a component. It can help to organize the internal
logic of a component.</p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes">constructor</a> is a special method that is called once each time an
instance of your component is created.</p>
<pre><code class="language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  <span class="hljs-keyword">constructor</span> () {
    <span class="hljs-built_in">super</span>()
    <span class="hljs-comment">// ...</span>
  }

  myMethod (n) {
    <span class="hljs-built_in">this</span>.state.number = n
    <span class="hljs-built_in">this</span>.reRender()
  }

  render () {
    <span class="hljs-keyword">const</span> n = <span class="hljs-built_in">this</span>.state.number

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`
      &lt;div&gt;
        The number is <span class="hljs-subst">${n}</span>
      &lt;/div&gt;
    `</span>
  }
}</code></pre>
<p>After the component is created, the method <code>myMethod</code> method can be called.</p>
<pre><code class="language-js"><span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;foo&#x27;</span>).myMethod(<span class="hljs-number">42</span>)</code></pre>

    </section>
  

    <section id="styling">
      
      <h1 id="styling">Styling</h1>
<p>Tonic supports multiple approaches to safely styling components.</p>
<h3>Option 1. Inline styles</h3>
<p>Inline styles are a security risk. Tonic provides the <code>styles()</code> method so you
can inline styles safely. Tonic will apply the style properties when the <code>render()</code>
method is called.</p>
<pre><code class="language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyGreeting</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  styles () {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">a</span>: {
        <span class="hljs-attr">color</span>: <span class="hljs-built_in">this</span>.props.fg,
        <span class="hljs-attr">fontSize</span>: <span class="hljs-string">&#x27;30px&#x27;</span>
      },
      <span class="hljs-attr">b</span>: {
        <span class="hljs-attr">backgroundColor</span>: <span class="hljs-built_in">this</span>.props.bg,
        <span class="hljs-attr">padding</span>: <span class="hljs-string">&#x27;10px&#x27;</span>
      }
    }
  }

  render () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`&lt;div styles=&quot;a b&quot;&gt;<span class="hljs-subst">${<span class="hljs-built_in">this</span>.children}</span>&lt;/div&gt;`</span>
  }
}</code></pre>
<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">my-greeting</span> <span class="hljs-attr">fg</span>=<span class="hljs-string">&quot;white&quot;</span> <span class="hljs-attr">bg</span>=<span class="hljs-string">&quot;red&quot;</span>&gt;</span>Hello, World<span class="hljs-tag">&lt;/<span class="hljs-name">my-greeting</span>&gt;</span></code></pre>
<h3>Option 2. Dynamic Stylesheets</h3>
<p>The <code>stylesheet()</code> method will add a styleaheet to your compoonent.</p>
<pre><code class="language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyGreeting</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  stylesheet () {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`
      my-greeting div {
        display: <span class="hljs-subst">${<span class="hljs-built_in">this</span>.props.display}</span>;
      }
    `</span>
  }

  render () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`&lt;div&gt;&lt;/div&gt;`</span>
  }
}</code></pre>
<h3>Option 3. Static Stylesheets</h3>
<p>The static <code>stylesheet()</code> method will add a styleaheet to the document,
but only once.</p>
<pre><code class="language-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyGreeting</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Tonic</span> </span>{
  <span class="hljs-keyword">static</span> stylesheet () {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`
      my-greeting div {
        border: 1px dotted #666;
      }
    `</span>
  }

  render () {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.html<span class="hljs-string">`&lt;div&gt;&lt;/div&gt;`</span>
  }
}</code></pre>

    </section>
  

    <section id="csp">
      
      <h1 id="csp">CSP</h1>
<p>Tonic is <code>Content Security Policy</code> friendly. <a href="https://developers.google.com/web/fundamentals/security/csp/">This</a> is a good introduction to
<code>CSP</code>s if you&#39;re not already familiar with how they work. This is an example policy,
it&#39;s quite liberal, in a real app you would want these rules to be more specific.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">meta</span>
  <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;Content-Security-Policy&quot;</span>
  <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;
    default-src &#x27;self&#x27;;
    font-src &#x27;self&#x27; https:;
    img-src &#x27;self&#x27; https: data:;
    style-src &#x27;self&#x27; &#x27;nonce-123&#x27; https:;
    script-src &#x27;self&#x27; &#x27;nonce-123&#x27;;
    connect-src &#x27;self&#x27; https:;&quot;</span>&gt;</span></code></pre>
<p>For <code>Tonic</code> to work with a CSP, you need to set the <a href="https://en.wikipedia.org/wiki/Cryptographic_nonce"><code>nonce</code></a> property. For
example, given the above policy you would add the following to your javascript...</p>
<pre><code class="language-js">Tonic.nonce = <span class="hljs-string">&#x27;c213ef6&#x27;</span></code></pre>

    </section>
  

    <section id="api">
      
      <h1 id="apis">APIs</h1>
<h2>METHODS IMPLEMENTED BY THE COMPONENT DEVELOPER</h2>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>render()</code></td>
<td align="left">Required, should return a template literal of HTML. There is no need to call this directly, the browser will call it. Can be <code>sync</code>, <code>async</code> or <code>async generator</code>.</td>
</tr>
<tr>
<td align="left"><code>stylesheet()</code></td>
<td align="left">Optional, Should return a string of css to be added to a <code>style</code> tag in the component (ideal for components that use a shadow dom).</td>
</tr>
<tr>
<td align="left"><code>static stylesheet()</code></td>
<td align="left">Optional, Should return a string of css to be lazily added to a <code>style</code> tag in the head (ideal for custom elements with no shadow dom).</td>
</tr>
<tr>
<td align="left"><code>styles()</code></td>
<td align="left">Optional, Should return an object that represents inline-styles to be applied to the component. Styles are applied by adding a keys from the object to the <code>styles</code> attribute of an html tag in the render function, for example <code>styles=&quot;key1 key2&quot;</code>. Each object&#39;s key-value pair are added to the element&#39;s style object.</td>
</tr>
</tbody></table>
<h2>STATIC METHODS</h2>
<table>
<thead>
<tr>
<th align="left">Method</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>add(Class, String?)</code></td>
<td align="left">Register a class as a new custom-tag and provide options for it. You can pass an optional string that is the HTML tagName for the custom component.</td>
</tr>
<tr>
<td align="left"><code>escape(String)</code></td>
<td align="left">Escapes HTML characters from a string (based on <a href="https://github.com/mathiasbynens/he">he</a>).</td>
</tr>
<tr>
<td align="left"><code>unsafeRawString(String)</code></td>
<td align="left">Insert raw text in html`...`. Be careful with calling <code>unsafeRawString</code> on untrusted text like user input as that is an XSS attack vector.</td>
</tr>
<tr>
<td align="left"><code>match(Node, Selector)</code></td>
<td align="left">Match the given node against a selector or any matching parent of the given node. This is useful when trying to locate a node from the actual node that was interacted with.</td>
</tr>
</tbody></table>
<h2>INSTANCE METHODS</h2>
<table>
<thead>
<tr>
<th align="left">Method</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>reRender(Object &#124; Function)</code></td>
<td align="left">Set the properties of a component instance. Can also take a function which will receive the current props as an argument.</td>
</tr>
<tr>
<td align="left">html`...`</td>
<td align="left">Interpolated HTML string (use as a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">tagged template</a>). Provides...<br/> 1. Pass object references as properties.<br/> 2. Spread operator (ie <code>&lt;a ...${object}&gt;&lt;/a&gt;</code>) which turns ojbects into html properties.<br/> 3. Automatic string escaping.<br/> 4. Render <code>NamedNodeMap</code>, <code>HTMLElement</code>, <code>HTMLCollection</code>, or <code>NodeList</code> as html (ie <code>&lt;a&gt;${span}&lt;/a&gt;</code>).<br/></td>
</tr>
<tr>
<td align="left"><code>dispatch(String, Object?)</code></td>
<td align="left">Dispatch a custom event from the component with an optional detail. A parent component can listen for the event by calling <code>this.addEventListener(String, this)</code> and implementing the event handler method.</td>
</tr>
</tbody></table>
<h2>INSTANCE PROPERTIES</h2>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>elements</code></td>
<td align="left">An array of the original child <em>elements</em> of the component.</td>
</tr>
<tr>
<td align="left"><code>nodes</code></td>
<td align="left">An array of the original child <em>nodes</em> of the component.</td>
</tr>
<tr>
<td align="left"><code>props</code></td>
<td align="left">An object that contains the properties that were passed to the component.</td>
</tr>
<tr>
<td align="left"><code>state</code></td>
<td align="left">A plain-old JSON object that contains the state of the component.</td>
</tr>
</tbody></table>
<h2>&quot;LIFECYCLE&quot; INSTANCE METHODS</h2>
<table>
<thead>
<tr>
<th align="left">Method</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>constructor(object)</code></td>
<td align="left">An instance of the element is created or upgraded. Useful for initializing state, setting up event listeners, or creating shadow dom. See the spec for restrictions on what you can do in the constructor. The constructor&#39;s arguments must be forwarded by calling <code>super(object)</code>.</td>
</tr>
<tr>
<td align="left"><code>willConnect()</code></td>
<td align="left">Called prior to the element being inserted into the DOM. Useful for updating configuration, state and preparing for the render.</td>
</tr>
<tr>
<td align="left"><code>connected()</code></td>
<td align="left">Called every time the element is inserted into the DOM. Useful for running setup code, such as fetching resources or rendering. Generally, you should try to delay work until this time.</td>
</tr>
<tr>
<td align="left"><code>disconnected()</code></td>
<td align="left">Called every time the element is removed from the DOM. Useful for running clean up code.</td>
</tr>
<tr>
<td align="left"><code>updated(oldProps)</code></td>
<td align="left">Called after reRender() is called. This method is not called on the initial render.</td>
</tr>
</tbody></table>

    </section>
  

          <footer>
            <div>
              <span>Supported by</span>
              <svg>
                <use xlink:href="./logo-sprite.svg#mp_logo">
              </svg>
            </div>
          </footer>
        </main>
        <script nonce="U29tZSBzdXBlciBzZWNyZXQ=" crossorigin="anonymous" src="bundle.js"></script>
      </body>
    </html>
  